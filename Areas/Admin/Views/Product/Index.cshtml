@using Pronia.ViewModels.ProductViewModels
@model List<ProductGetVM>

<style>
    .desc-col {
        max-width: 300px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .action-buttons {
        display: flex;
        gap: 6px;
        flex-wrap: nowrap;
    }

    .action-buttons a {
        white-space: nowrap;
    }

    .product-img {
        width: 35px;
        height: 35px;
        object-fit: cover;
        border-radius: 4px;
    }
</style>

<div class="container">
    <div class="row">
        <h2>Products</h2>

        <a class="btn btn-primary my-3"
           asp-area="Admin"
           asp-controller="Product"
           asp-action="Create">
            Add New Product
        </a>

        <table class="table table-striped align-middle">
            <thead>
                <tr>
                    <th>Id</th>
                    <th>Name</th>
                    <th>Description</th>
                    <th>Image</th>
                    <th>Price</th>
                    <th>Rating</th>
                    <th>Category</th>
                    <th>Actions</th>
                </tr>
            </thead>

            <tbody>
                @foreach (var product in Model)
                {
                    <tr>
                        <td>@product.Id</td>

                        <td>@product.Name</td>

                        <td class="desc-col" title="@product.Description">
                            @product.Description
                        </td>

                        <td>
                            <img src="~/assets/images/website-images/@product.MainImageUrl"
                                 class="product-img"
                                 alt="Product Image" />
                        </td>

                        <td>@product.Price</td>

                        <td>@product.Rating</td>

                        <td>@product.CategoryName</td>

                        <td>
                            <div class="action-buttons">
                                <a class="btn btn-sm btn-primary"
                                   asp-action="Detail"
                                   asp-route-id="@product.Id">
                                    Detail
                                </a>

                                <a class="btn btn-sm btn-warning"
                                   asp-action="Update"
                                   asp-route-id="@product.Id">
                                    Update
                                </a>

                                <a class="btn btn-sm btn-danger deleteBtn"
                                   asp-action="Delete"
                                   asp-route-id="@product.Id">
                                    Delete
                                </a>
                            </div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
